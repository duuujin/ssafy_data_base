# 정규화
- 데이터 중복을 최소화하고, 이상 현상을 예방, 재작업을 줄이는 목적, 테이블을 구조화

# 정규화 목적
1. 중복 최소화
    - 불필요한 중복 데이터를 제거해 일관성 유지
2. 이상 현상 방지
    - 삽입, 갱신, 삭제 작업 시 발생할 수 있는 불일치 문제 에방
3. 유연성 향상
    - 데이터베이스 구조 변경 시 영향을 받는 영역을 최소화하여 유지보수성을 높임

# 이상현상
- 삽입, 갱신, 삭제 등의 연산에서 비일관성이 생기는 문제

# 이상현상 종류
1. 삽입 이상
    - 새로운 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제
2. 갱신 이상
    - 중복된 데이터 중 일부만 변경되어 데이터 불일치가 발생하는 문제
3. 삭제 이상
    - 어떤 데이터를 삭제할 때, 반드시 있어야 하는 정보까지 같이 사라지는 문제

# 정규화 종류
- 일반적으로 1NF에서 시작, 2NF, 3NF 순으로 진행 , 필요에 따라 BCNF 이상(4NF, 5NF, 6NF)까지 고려하기도 함
- 실무에서는 보통 3NF, BCNF까지 도달하면 정규화가 이루어졌다고 표현

# 각 정규화 단계
- 제 1정규형(1NF)
    - 각 요소의 중복되는 항목이 없어야 한다
- 제 2정규형(2NF)
    - 제 1정규형을 만족하면서 PK가 아닌 모든 속성이 PK에 완전 함수 종속되어야 한다
- 제 3정규형(3NF)
    - 제 2정규형을 만족하면서 모든 속성이 PK에 이행적 함수 종속이 되지 않아야 한다
- BCNF (Boyce Codd Normalization Form)
    - 제 3정규형을 만족하면서, 모든 결정자가 후보 키여야 한다

## 제 1정규형(1NF)
1. 각 속성(컬럼)이 원자 값(Atomic Value), 즉 하나의 값만 가져야 함
2. 중복된 컬럼이 없어야 함
3. 각 행(row)이 유일하게 식별될 수 있어야 함(기본 키 존재)

## 제 2정규형(2NF)
1. 제 1정규형을 만족해야 함
2. 복합 키를 사용하는 테이블에서 모든 비 기본 키속성이 기본 키의 모든 컬럼에 완전 종속 되어야 함
    - 즉, 부분 함수 종속을 제거

## 제 3정규형(3NF)
1. 제 2정규형을 만족해야 함
2. 기본 키에 대한 이행적 함수 종속이 없어야 함
3. 기본 키가 아닌 속성 간의 종속성을 제거해야 함


## BCNF
1. 제 3정규형을 만족해야 함
2. 모든 결정자가 후보 키여야 함
3. 3NF 이후에도 남아있는 이상 현상을 해결하는 더 엄격한 형태
4. 기본 키가 아닌 속성이 다른 컬럼을 결정할 수 없게끔 테이블 분해

### 후보키
- 모든 속성을 결정하는 최소 결정자
- 한 테이블의 각 행을 유일하게 식별 할 수 있는 속성 중 최소성을 만족하는 키
- 후보 키의 조건
    - 유일성(Unique) : 테이블의 각 행을 고유하게 식별 할 수 있어야 함
    - 최소성(Minimality) : 불필요한 컬럼을 포함하지 않는, 최소한의 속성 조합이어야 함
- 한 테이블에 여러 후보 키가 있을 수 있으며, 그 중 하나를 Primary Key로 선택해야 함


## 정규화 주의 사항
- 3NF 이상으로 들어가면 BCNF, 4NF, 5NF, 6NF 등이 있으나, 지나친 분리로 인한 조인(Join) 증가나 성능 저하 등의 문제가 발생
- 따라서 업무 요구에 따라 필요한 만큼 정규화/반정규화를 조정할 것을 권장


# 정리
- 정규화는 중복 데이터와 이상 현상을 줄이기 위한 DB 설계 기법
- 일반적으로 1NF -> 2NF -> 3NF 순으로 진행
- 이상현상(Anomaly)
    - 삽입/갱신/삭제 작업에서 생길 수 있는 문제점을 예방
- BCNF
    - 3NF보다 엄격한 규칙으로, 모든 결정자는 후보 키가 되어야 함
- 정규화를 통해 데이터 무결성과 일관성을 확보하고, 유지보수 시 구조 변경 부담을 최소화 할 수 있음

